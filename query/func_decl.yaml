id: find-function-signatures
language: TypeScript
rule:
  any:
    # 基本的な関数宣言（返り値型あり）
    - pattern: 'function $NAME($$$PARAMS): $RETURN_TYPE { $$$BODY }'
      transform:
        substring:
          source: $MATCH
          startOffset: 0
          endOffset:
            indexOf:
              source: $MATCH
              searchValue: "{"
    # 型注釈なしの関数
    - pattern: 'function $NAME($$$PARAMS) { $$$BODY }'
      transform:
        substring:
          source: $MATCH
          startOffset: 0
          endOffset:
            indexOf:
              source: $MATCH
              searchValue: "{"
    # ジェネリック関数
    - pattern: 'function $NAME<$$$GENERICS>($$$PARAMS): $RETURN_TYPE { $$$BODY }'
      transform:
        substring:
          source: $MATCH
          startOffset: 0
          endOffset:
            indexOf:
              source: $MATCH
              searchValue: "{"